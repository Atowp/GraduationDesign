<!--pages/order/index.wxml-->
<view class="">
    <!--搜索框-->
    <SearchInput></SearchInput>
    <!--订单-->
    <view class="order_content">
        <!--进行中的订单-->
        <view class="block">
            <text class="title">进行中的订单</text>
            <!--循环-->
            <view class="order_box"
            bindtap="getOrderList"
            wx:for="{{orderList}}"
            wx:for-item="item">
                <!--一个订单-->
                <view class="order dd" wx:if="{{item.status == 0 || item.status == 1}}">
                <view data-index="1" catchtap='panel'>
                    <view>
                        <text>订单类型</text>
                        {{item.type}}
                    </view>
                    <view>
                        <text>重量</text>
                        {{item.weight}}kg
                    </view>
                    <view>
                        <text>预约时间</text>
                        {{item.time}}
                    </view>
                    <!--展开折叠分割线-->
                    <view  wx:if="{{showIndex == 1}}" data-index="0">
                        <view wx: if="{{item.detail}} !== ''">
                            <view>
                                <text>详细内容</text>
                                {{item.detail}}
                            </view>
                        </view>
                        <view>
                            <text>联系人</text>
                            {{item.contact}}
                        </view>
                        <view>
                            <text>电话</text>
                            {{item.phone}}
                        </view>
                        <view>
                            <text>详细地址</text>
                            {{item.address}}
                        </view>
                        <view>
                            <text>订单状态</text>
                            {{statusDict[item.status]}}
                        </view>
                        <view>
                            <text>备注</text>
                            {{item.remark}}
                        </view>
                        <!--删除订单应该在历史订单-->
                        <!--<view wx:if="{{item.status === '-1'}}" class="button_box delete" catchtap="delete" data-item="{{item}}">
                            <view class="button">删除订单</view>
                        </view>-->
                        <view class="button_box cancel" 
                        catchtap="cancel" data-item="{{item}}">
                            <view class="button">取消订单</view>
                        </view>
                    </view>
                    <!--分割线-->
                </view>
                </view>
            </view>
        </view>
        <!--历史订单-->
        <view class="block">
            <view class="title_box">
                <text class="title">历史订单</text>
            <!--这个bind应该绑在循环项上-->
                <picker bindchange="bindPickerChange" class="picker_box" value="{{index}}" range="{{array}}">
                    <view class="picker">{{array[index]}}</view>
                </picker>
            </view>
            <!--循环-->
            <view class="order_box"
            bindtap="getOrderList" 
            wx:for="{{orderList}}"
            wx:for-item="item">
                <!--一个订单-->
                <view class="order d1" 
                wx:if="{{item.status == 2 || item.status == '-1'}}"
                >
                    <view data-index="2"
                    catchtap='panel'
                    >
                    <view>
                        <text>订单类型</text>
                        {{item.type}}
                    </view>
                    <view>
                        <text>重量</text>
                        {{item.weight}}kg
                    </view>
                    <view>
                        <text>预约时间</text>
                        {{item.time}}
                    </view>
                    <view>
                        <text>日期</text>
                        {{item.date}}
                    </view>
                    <view wx:if="{{showIndex == 2}}"  data-index="0">
                        <view>
                            <text>联系人</text>
                            {{item.contact}}
                        </view>
                        <view>
                            <text>电话</text>
                            {{item.phone}}
                        </view>
                        <view>
                            <text>详细地址</text>
                            {{item.address}}
                        </view>
                        <view>
                            <text>订单状态</text>
                        {{statusDict[item.status]}}
                        </view>
                        <view>
                            <text>备注</text>
                            {{item.remark}}
                        </view>
                    <!--只有失败的订单可以删除-->
                        <view wx: if="{{item.status == '-1'}}">
                            <view class="button_box delete" catchtap="delete">
                                <view class="button">删除订单</view>
                            </view>
                        </view>
                    </view>
                    </view>
                </view>
            </view>
        </view>
    </view>
</view>
